{"ast":null,"code":"import * as ActionTypes from \"./ActionTypes\";\nimport axios from \"axios\";\nimport jwt from \"jsonwebtoken\";\nimport createBrowserHistory from \"history/createBrowserHistory\";\nvar history = createBrowserHistory({\n  forceRefresh: true\n});\nexport var addCars = function addCars() {\n  return {\n    type: ActionTypes.ADD_CARS\n  };\n};\nexport var addPersonnels = function addPersonnels(personnels) {\n  return {\n    type: ActionTypes.ADD_PERSONNELS,\n    personnels: personnels\n  };\n};\nexport var pushPersonnels = function pushPersonnels(code, pseudo) {\n  return {\n    //addition\n    type: ActionTypes.PUSH_PERSONNELS,\n    code: code,\n    pseudo: pseudo\n  };\n};\nexport var alterPersonnels = function alterPersonnels(id, salary, position) {\n  return {\n    //addition\n    type: ActionTypes.ALTER_PERSONNELS,\n    Id: id,\n    Salary: salary,\n    Position: position\n  };\n};\nexport var deletePersonnels = function deletePersonnels(id) {\n  return {\n    type: ActionTypes.DELETE_PERSONNELS,\n    Id: id\n  };\n};\nexport var deletePersonnel = function deletePersonnel(email) {\n  return function (dispatch) {\n    return axios.delete(\"http://localhost:3000/api/personnels\", email).then(function (response) {\n      return dispatch(deletePersonnels(email));\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n};\nexport var userSignup = function userSignup(userData) {\n  return function (dispatch) {\n    return axios.post(\"http://localhost:3000/api/users\", userData).then(function (response) {}).catch(function (error) {\n      console.log(error);\n    });\n  };\n};\nexport var setAuthToken = function setAuthToken(token) {\n  if (token) {\n    axios.defaults.headers.common[\"Authorization\"] = \"Bearer \".concat(token);\n    console.log(token);\n  } else delete axios.defaults.headers.common[\"Authorization\"];\n};\nexport var setUser = function setUser(user) {\n  return {\n    type: ActionTypes.SET_USER,\n    payload: user\n  };\n};\nexport var login = function login(userData) {\n  return function (dispatch) {\n    return axios.post(\"http://localhost:3000/api/auth\", userData).then().then(function (response) {\n      var token = response.data.token;\n      localStorage.setItem(\"jwToken\", token);\n      setAuthToken(token);\n      dispatch(setUser(jwt.decode(token)));\n      console.log(jwt.decode(token));\n    });\n  };\n};\nexport var setAdmin = function setAdmin(user) {\n  return {\n    type: ActionTypes.SET_ADMIN,\n    payload: user\n  };\n};\nexport var loginAdmin = function loginAdmin(userData, h) {\n  return function (dispatch) {\n    return axios.post(\"http://localhost:3000/api/admin\", userData).then(function (response) {\n      var token = response.data.token;\n      localStorage.setItem(\"jwToken\", token);\n      setAuthToken(token);\n      dispatch(setAdmin(jwt.decode(token)));\n      h.push(\"/admin\");\n    }).catch(function (error) {\n      console.log(error);\n      h.push(\"home\");\n    });\n  };\n};\nexport var fetchPersonnels = function fetchPersonnels() {\n  return function (dispatch) {\n    return axios.post(\"http://localhost:3000/api/personnels\").then(function (response) {\n      return dispatch(addPersonnels(response.data));\n    });\n  };\n};","map":{"version":3,"sources":["/home/admed/Desktop/pfa/src/redux/ActionCreators.js"],"names":["ActionTypes","axios","jwt","createBrowserHistory","history","forceRefresh","addCars","type","ADD_CARS","addPersonnels","personnels","ADD_PERSONNELS","pushPersonnels","code","pseudo","PUSH_PERSONNELS","alterPersonnels","id","salary","position","ALTER_PERSONNELS","Id","Salary","Position","deletePersonnels","DELETE_PERSONNELS","deletePersonnel","email","dispatch","delete","then","response","catch","error","console","log","userSignup","userData","post","setAuthToken","token","defaults","headers","common","setUser","user","SET_USER","payload","login","data","localStorage","setItem","decode","setAdmin","SET_ADMIN","loginAdmin","h","push","fetchPersonnels"],"mappings":"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","sourcesContent":["import * as ActionTypes from \"./ActionTypes\";\nimport axios from \"axios\";\nimport jwt from \"jsonwebtoken\";\nimport createBrowserHistory from \"history/createBrowserHistory\";\n\nconst history = createBrowserHistory({ forceRefresh: true });\nexport const addCars = () => ({\n  type: ActionTypes.ADD_CARS\n});\nexport const addPersonnels = personnels => ({\n  type: ActionTypes.ADD_PERSONNELS,\n  personnels: personnels\n});\nexport const pushPersonnels = (code, pseudo) => ({\n  //addition\n  type: ActionTypes.PUSH_PERSONNELS,\n  code: code,\n  pseudo: pseudo\n});\nexport const alterPersonnels = (id, salary, position) => ({\n  //addition\n  type: ActionTypes.ALTER_PERSONNELS,\n  Id: id,\n  Salary: salary,\n  Position: position\n});\nexport const deletePersonnels = id => ({\n  type: ActionTypes.DELETE_PERSONNELS,\n  Id: id\n});\nexport const deletePersonnel = email => dispatch => {\n  return axios\n    .delete(\"http://localhost:3000/api/personnels\", email)\n    .then(response => dispatch(deletePersonnels(email)))\n    .catch(function(error) {\n      console.log(error);\n    })\n};\nexport const userSignup = userData => dispatch => {\n  return axios\n    .post(\"http://localhost:3000/api/users\", userData)\n    .then(function(response) {})\n    .catch(function(error) {\n      console.log(error);\n    });\n};\n\nexport const setAuthToken = token => {\n  if (token) {\n    axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n    console.log(token);\n  } else delete axios.defaults.headers.common[\"Authorization\"];\n};\nexport const setUser = user => ({\n  type: ActionTypes.SET_USER,\n  payload: user\n});\nexport const login = userData => dispatch => {\n  return axios\n    .post(\"http://localhost:3000/api/auth\", userData)\n    .then()\n    .then(function(response) {\n      const token = response.data.token;\n      localStorage.setItem(\"jwToken\", token);\n      setAuthToken(token);\n      dispatch(setUser(jwt.decode(token)));\n      console.log(jwt.decode(token));\n    });\n};\n\nexport const setAdmin = user => ({\n  type: ActionTypes.SET_ADMIN,\n  payload: user\n});\nexport const loginAdmin = (userData, h) => dispatch => {\n  return axios\n    .post(\"http://localhost:3000/api/admin\", userData)\n    .then(function(response) {\n      const token = response.data.token;\n      localStorage.setItem(\"jwToken\", token);\n      setAuthToken(token);\n      dispatch(setAdmin(jwt.decode(token)));\n      h.push(\"/admin\");\n    })\n\n    .catch(function(error) {\n      console.log(error);\n      h.push(\"home\");\n    });\n};\n\nexport const fetchPersonnels = () => dispatch => {\n  return axios\n    .post(\"http://localhost:3000/api/personnels\")\n    .then(response => dispatch(addPersonnels(response.data)));\n};\n"]},"metadata":{},"sourceType":"module"}